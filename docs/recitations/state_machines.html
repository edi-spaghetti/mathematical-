
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>State Machines &#8212; maths 6.042 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Greatest Common Divisors" href="greatest_common_divisor.html" />
    <link rel="prev" title="Induction" href="induction.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="state-machines">
<h1>State Machines<a class="headerlink" href="#state-machines" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="linkhttps://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-042j-mathematics-for-computer-science-fall-2010/recitations/MIT6_042JF10_rec03.pdf">problems</a>
<a class="reference external" href="linkhttps://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-042j-mathematics-for-computer-science-fall-2010/recitations/MIT6_042JF10_rec03_sol.pdf">solution</a></p>
<section id="breaking-a-chocolate-bar">
<h2>Breaking a Chocolate Bar<a class="headerlink" href="#breaking-a-chocolate-bar" title="Permalink to this headline">¶</a></h2>
<p>We are given a chocolate bar with m × n squares of chocolate, and our task is to divide it into mn individual squares.
We are only allowed to split one piece of chocolate at a time using a vertical or a horizontal break.
For example, suppose that the chocolate bar is 2 × 2.
The first split makes two pieces, both 2 × 1.
Each of these pieces requires one more split to form single squares.
This gives a total of three splits.
Prove that the number of times you split the bar does not depend on the sequence of splits you make.</p>
<hr><p>First we define a state machine,</p>
<p><strong>States</strong>: A sequence of pairs (m, n) where,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\m &amp;= \text{ the number of horizontal squares}\\n &amp;= \text{ the number of vertical squares}\\\end{aligned}\end{aligned}\end{align} \]</div>
<p>Each pair represents a block that may or may not be split further.</p>
<p><strong>Start-State</strong>: ( (m, n) )</p>
<p><strong>Transitions</strong>:</p>
<ol class="arabic">
<li><p>Split Horizontally</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}         ...\ ::= \text{ all other existing pairs}\\( (m, n),\ ... ) \rightarrow ( (m-a, n), (a, n), ... ), m &gt; a \ge 1\end{aligned}\end{align} \]</div>
</li>
<li><p>Split Vertically</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}         ...\ ::= \text{ all other existing pairs}\\( (m, n),\ ... ) \rightarrow ( (m, n-b), (m, b), ... ), n &gt; b \ge 1\end{aligned}\end{align} \]</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A transition can be applied to one pair at a time.
This results in 2 new pairs, plus every pair already in the current state.
Therefore the cardinality of the state increases by 1 on each transition.
This also gives us the property that the number of transitions is equal to the cardinality of the state,
minus 1 for the start state.</p>
</div>
<p>Let P(t) be the predicate, defined as follows,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}t = |state| - 1 \qquad \text{(number of transitions so far)}\\t + \bigg( \sum_{i=0}^t (m_i \cdot n_i) - 1 \bigg) = (m_{initial} \cdot n_{initial}) - 1\end{aligned}\end{align} \]</div>
<p>That is, at any given number of transitions t (a non-negative integer),
the sum of <span class="math notranslate nohighlight">\((m \cdot n) - 1\)</span> applied to each pair in the state plus the number of transitions t, never changes.</p>
<p><strong>Theorem1</strong>: P(t) holds for all <span class="math notranslate nohighlight">\(t \in \{ \Bbb N \mid t \le (m_{initial} \cdot n_{initial}) - 1\}\)</span></p>
<p><strong>Proof</strong>. By structural induction</p>
<p><strong>Base Case</strong>: P(0) is trivially true because t = 0 and there is only one pair in the start state</p>
<div class="math notranslate nohighlight">
\[0 + (m \cdot n) - 1 = (m \cdot n) - 1\]</div>
<p><strong>Inductive Step</strong>: Now we must show P(t) is true after any transition given that the P(0) is true.
Per the transitions there are two cases to consider.</p>
<p><strong>Case 1</strong>: Split Horizontally</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\t + ((m-a) \cdot n) - 1 + (a \cdot n) - 1 &amp;= (m \cdot n) - 1\\t + mn - an - 1 + an - 1 &amp;= mn - 1\\t + mn - 2 &amp;= mn - 1\\t &amp;= 1\\\end{aligned}\end{aligned}\end{align} \]</div>
<p>This proves P(t) after any single horizontal split, because the equation is balanced and the number of transitions has increased by 1.</p>
<p><strong>Case 2</strong>: Split Vertically</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\t + (m \cdot n-b) - 1 + (m \cdot b) - 1 &amp;= (m \cdot n) - 1\\t + mn - mb - 1 + mb - 1 &amp;= mn - 1\\t + mn - 2 &amp;= mn - 1\\t &amp;= 1\\\end{aligned}\end{aligned}\end{align} \]</div>
<p>This proves P(t) after any single vertical split, because the equation is balanced and the number of transitions has increased by 1.</p>
<p>This proves P(t) holds as required, completing the constructor cases.
By structural induction we conclude that P(t) holds for all <span class="math notranslate nohighlight">\(t \in \{ \Bbb N \mid t \le (m_{initial} \cdot n_{initial}) - 1\}\)</span>.</p>
<p>Now we must prove that <span class="math notranslate nohighlight">\(m \cdot n - 1\)</span> is the maximum number of transitions.</p>
<p><strong>Theorem2</strong>: <span class="math notranslate nohighlight">\(t = m \cdot n - 1\)</span>.</p>
<p><strong>Proof</strong>: By contradiction.</p>
<p>First, we will assume <span class="math notranslate nohighlight">\(t &gt; m \cdot n - 1\)</span>.</p>
<p>Starting with minimum values m=1 and n=1,
By the rules of the game, we cannot split an individual square (i.e. a 1 × 1 square) any further.
This means we can have no transitions, so <span class="math notranslate nohighlight">\(t = 0\)</span>. However by our assumption,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}t &gt; m \cdot n - 1\\0 &gt; 1 \cdot 1 - 1\\0 &gt; 0\end{aligned}\end{align} \]</div>
<p>This is a contradiction, so t cannot be greater than <span class="math notranslate nohighlight">\(m \cdot n - 1\)</span>.</p>
<p>Second, we can consider <span class="math notranslate nohighlight">\(t &lt; m \cdot n - 1\)</span>.
Using the same values for m and n, we should again find <span class="math notranslate nohighlight">\(t = 0\)</span>. However,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}t &lt; m \cdot n - 1\\0 &lt; 1 \cdot 1 - 1\\0 &lt; 0\end{aligned}\end{align} \]</div>
<p>This is also a contradiction, to t cannot be less than <span class="math notranslate nohighlight">\(m \cdot n - 1\)</span>.</p>
<p>The only possibility remaining then, is that <span class="math notranslate nohighlight">\(t = m \cdot n - 1\)</span>.</p>
<p>From theorem 2 we showed that the number of total number of splits is equal to <span class="math notranslate nohighlight">\(m \cdot n - 1\)</span>.
From theorem 1 we showed that with any arbitrary split, the value remains invariant.
This means no matter what sequence of splits is made, the total number of splits is always determined by the initial state.
<span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</section>
<section id="the-temple-of-forever">
<h2>The Temple of Forever<a class="headerlink" href="#the-temple-of-forever" title="Permalink to this headline">¶</a></h2>
<p>Each monk entering the Temple of Forever is given a bowl with 15 red beads and 12 green beads.
Each time the Gong of Time rings, a monk must do one of two things:</p>
<ol class="arabic simple">
<li><p>Exchange: If he has at least 3 red beads in his bowl, then he may exchange 3 red beads for 2 green beads.</p></li>
<li><p>Swap: He may replace each green bead in his bowl with a red bead and replace each red bead in his bowl with a green bead.
That is, if he starts with i red beads and j green beads, then after he performs this operation, he will have j red beads and i green beads.</p></li>
</ol>
<p>A monk may leave the Temple of Forever only when he has exactly 5 red beads and 5 green beads in his bowl.
Let’s look at how we can represent this problem as a state machine.</p>
<p><strong>What do the states of the machine look like?</strong></p>
<br><p>The states are pairs (i, j) where;</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}i = \text{ the number of red beads}\\j = \text{ the number of green beads}\end{aligned}\end{align} \]</div>
<p><strong>Start-State</strong>: A sequence (i, j) where i = 15 and j = 12</p>
<p><strong>Use the notation you developed above to represent the allowable transitions in the
state machine.</strong></p>
<hr><p><strong>Transitions</strong>:</p>
<ol class="arabic">
<li><p>Exchange</p>
<div class="math notranslate nohighlight">
\[(i, j) \rightarrow (i - 3, j + 2), i \ge 3\]</div>
</li>
<li><p>Swap</p>
<div class="math notranslate nohighlight">
\[(i, j) \rightarrow (j, i)\]</div>
</li>
</ol>
<p><strong>Expand the state machine diagram to the first three or four levels.
Label the transitions according to the operation type (E for exchange or S for swap).</strong></p>
<hr><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(15, 12)
├── (12, 14)            E
│   ├── (14, 12)        S
│   │   ├── (11, 14)    E
│   │   └── (12, 14)    S
│   └── (9, 16)         E
│       ├── (16, 9)     S
│       └── (6, 18)     E
└── (12, 15)            S
    ├── (15, 12)        S
    │   ├── (12, 14)    E
    │   └── (12, 15)    S
    └── (9, 17)         E
        ├── (17, 9)     S
        └── (6, 19)     E
</pre></div>
</div>
<p>Now we’ll show that no monk can ever escape the Temple of Forever because the state <span class="math notranslate nohighlight">\((5, 5)\)</span> violates an invariant of the Temple of Forever machine.</p>
<p><strong>Theorem 1</strong>. No one ever leaves the Temple of Forever.</p>
<p>Prove this theorem by induction.
Begin by searching for an invariant that holds initially and is maintained by each operation,
but would be violated by the condition required for departure.</p>
<hr><p><strong>Invariant</strong>: let P(n) be the proposition that after n transitions,</p>
<div class="math notranslate nohighlight">
\[P(n) ::= i,j,a \in \Bbb N. b \in {2,3}. i - j = 5a + b\]</div>
<p>That is, the number of red beads minus number of green beads is equal to <span class="math notranslate nohighlight">\(5a + b\)</span> where a is any integer and b is 2 or 3.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I didn’t figure out this invariant myself, I had to check the notes.
Honestly, I have no idea how it could have been worked out and the notes don’t explain it either.</p>
</div>
<p><strong>Base Case</strong>: P(0) is true as shown,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\15 - 12 &amp;= 5a + b\\3 &amp;= 5 \cdot 0 + 3, \text{ where } k = 0, b = 3\\\end{aligned}\end{aligned}\end{align} \]</div>
<p><strong>Inductive Step</strong>: Assuming P(n) is true, we must show that P(n + 1) is true.
Per the transitions we must consider two cases;</p>
<ol class="arabic">
<li><p>Exchange.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\(i - 3) - (j + 2) &amp;= 5a + b\\(i - j) - 5 &amp;=\\&amp;= 5(a - 1) + b\\\end{aligned}\end{aligned}\end{align} \]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I had to check the notes again here, because they used 5(a - 1) + b as a proof that this is true of P(n + 1), but don’t explain why.
They also don’t explain how they make the jump from <span class="math notranslate nohighlight">\((i - j) - 5\)</span> to <span class="math notranslate nohighlight">\(5(a - 1) + b\)</span>.
It seems wrong because <span class="math notranslate nohighlight">\(5(a - 1) + b \ne 5a + b\)</span>, so clearly I’ve missed something.</p>
</div>
</li>
<li><p>Swap.</p>
<p>Here the signs change, but the numbers remain the same so,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\j - i &amp;= 5(-a) - b\\\text{if b = 3}\\&amp;= 5(a - 1) + 2 \qquad &amp;&amp; \text{(from the notes)}\\\text{else if b = 2}\\&amp;= 5(a - 1) + 3 \qquad &amp;&amp; \text{(from the notes)}\\\end{aligned}\end{aligned}\end{align} \]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I also couldn’t work this one out.
Think I may have missed a chapter because some of these explanations seem to be coming from nowhere.</p>
</div>
</li>
</ol>
<p>Therefore P(n) implies P(n + 1).</p>
<p>Per the rules of the temple, the state required to leave is (5, 5).
However as we can see, (5, 5) violates P(n),</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{aligned}\\5 - 5 &amp;= 5a + b\\\text{if b = 2}\\0 &amp;= 5a + 2\\5a &amp;= -2\\a &amp;= {-2 \over 5} \qquad &amp;&amp; \text{ -2 divide 5 is not an integer}\\\text{if b = 3}\\0 &amp;= 5a + 3\\5a &amp;= -3\\a &amp;= {-3 \over 5} \qquad &amp;&amp; \text{ -3 divide 5 is not an integer}\\\end{aligned}\end{aligned}\end{align} \]</div>
<p>Therefore the state of (5, 5) is unreachable, so no-one can leave the temple.
<span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
<p><strong>Theorem 2</strong>. There is a finite number of reachable states in the Temple of Forever machine.
Prove this theorem.
(Hint: First find an invariant that suggests an upper bound on the number of reachable states.
Be sure to prove the invariant.)</p>
<hr><p><strong>Invariant</strong>: Let P(n) be the predicate, defined as,</p>
<div class="math notranslate nohighlight">
\[P(n) ::= \lnot(i + j &gt; 27)\]</div>
<p>In other words, the total number of beads cannot be larger than the sum of beads at the start state (15 + 12 = 27).</p>
<p><strong>Base Case</strong>: P(0) is trivially true because 15 + 12 is not larger than 27.</p>
<p><strong>Inductive Step</strong>: There are two transitions to consider,</p>
<ol class="arabic">
<li><p>Exchange.</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}(i - 3) + (j + 2) \le 27\\(i + j) - 1 \le 27\\\text{by P(n) we know } i + j \le 27\end{aligned}\end{align} \]</div>
<p>So P(n + 1) is true for exchange.</p>
</div></blockquote>
</li>
<li><p>Swap.</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[j + i \le i + j\]</div>
<p>So P(n) is true for swap.</p>
</div></blockquote>
</li>
</ol>
<p>That proves P(n), so by the inductive hypothesis we know it is true for P(n + 1).</p>
<p>Given the initial state of (15, 12), the total number of beads is 27.
The number of combinations for any total, t is t + 1
Exchanging decreases the number of beads by 1, and there is no way for the total number of beads to increase.
Therefore, disregarding unreachable states, there are a finite number of states shown below,</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}s ::=\text{ total number of reachable states}\\s &lt;= \sum^{27}_{i=0} i + 1\\s &lt;= 406\end{aligned}\end{align} \]</div>
<p><span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
<p>Inside the Temple of Forever, the Gong of Time rings on.
As you may well imagine, the monks begin to recognize that no matter how many ways they try to exchange or swap their beads,
they always seem to end up in some state they’ve already been in before!
For one or two monks, this realization is all they need to propel them instantly into a state of enlightenment.</p>
<p>For the overwhelming majority, however, this knowledge does nothing but weaken their resolve.
They just get depressed. Taking note of the mental state of this second group,
the Keeper of the Temple makes an unannounced appearance and proclaims to the group,
“From now on, any monk who is able to visit 108 (108 being the mystical number that encompasses all of existence)
unique states will be allowed to leave the Temple of Forever.”</p>
<p>Do the monks have any chance of leaving the Temple of Forever?</p>
<p><strong>Theorem 3</strong>. <em>It is not possible to visit 108 unique states in the Temple of Forever machine.</em></p>
<hr><p><strong>Proof</strong>: By contradiction.</p>
<p>Assuming it is possible to reach 108 states, we consider the transitions.
As shown in theorem 2, every exchange transition decreases the total number of beads by 1.
With a start state of (15, 12) there are 27 total beads.
Also, per the rules, an exchange can only be done if there are more than 3 beads.
So there are a maximum of 27 - 2 = 25 exchange transitions possible.</p>
<p>Each swap transition creates a unique state once per pair.
Since there are 25 exchange transitions possible there are 25 swaps that will create a unique state.
A swap can be done at the start state so this gives an additional unique state for 26 states from swaps.</p>
<p>Then the start-state itself is a unique state, so an additional 1.</p>
<p>In total this gives 25 + 26 + 1 = 52 unique states.</p>
<p>However this contradicts our proposition that 108 states are reachable,
so we can conclude 108 are not reachable, and that the monks still have no chance to leave.
<span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">maths</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Recitations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="logic.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="induction.html">Induction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="greatest_common_divisor.html">Greatest Common Divisors</a></li>
<li class="toctree-l2"><a class="reference internal" href="exponentiation_modular_arithmetic_RSA.html">RSA</a></li>
<li class="toctree-l2"><a class="reference internal" href="graph_basics.html">Graph Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable_marriage_problem.html">A Protocol For College Admission</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_up_problem.html">Build Up Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="travelling_salesperson.html">Travelling Salesperson</a></li>
<li class="toctree-l2"><a class="reference internal" href="networks.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="relations.html">Equivalence Relations</a></li>
<li class="toctree-l2"><a class="reference internal" href="doubles.html">Doubles</a></li>
<li class="toctree-l2"><a class="reference internal" href="asymptotics.html">Asymptotic Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="asymptotics.html#asymptotic-equivalence">Asymptotic Equivalence</a></li>
<li class="toctree-l2"><a class="reference internal" href="asymptotics.html#more-asymptotic-notation">More Asymptotic Notation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../assignments/index.html">Assignments</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Recitations</a><ul>
      <li>Previous: <a href="induction.html" title="previous chapter">Induction</a></li>
      <li>Next: <a href="greatest_common_divisor.html" title="next chapter">Greatest Common Divisors</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Edward Spencer.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/recitations/state_machines.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>